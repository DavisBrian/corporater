<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>5 Data Transformation | Modern R in a Corporate Environment</title>
  <meta name="description" content="This is an original course for RADARS">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="5 Data Transformation | Modern R in a Corporate Environment" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is an original course for RADARS" />
  <meta name="github-repo" content="DavisBrian/corporater" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Data Transformation | Modern R in a Corporate Environment" />
  
  <meta name="twitter:description" content="This is an original course for RADARS" />
  

<meta name="author" content="Brian Davis">


<meta name="date" content="2019-01-11">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="data-import-export.html">
<link rel="next" href="tidy-data.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="css\style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Modern R in a Corporate Environment</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="part"><span><b>I Preamble</b></span></li>
<li class="chapter" data-level="1" data-path="preamble-intro.html"><a href="preamble-intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="preamble-intro.html"><a href="preamble-intro.html#course-philosophy"><i class="fa fa-check"></i><b>1.1</b> Course Philosophy</a><ul>
<li class="chapter" data-level="1.1.1" data-path="preamble-intro.html"><a href="preamble-intro.html#reproducible-research-approach"><i class="fa fa-check"></i><b>1.1.1</b> Reproducible Research Approach</a></li>
<li class="chapter" data-level="1.1.2" data-path="preamble-intro.html"><a href="preamble-intro.html#fda-validation"><i class="fa fa-check"></i><b>1.1.2</b> FDA Validation</a></li>
<li class="chapter" data-level="1.1.3" data-path="preamble-intro.html"><a href="preamble-intro.html#the-sas-myth"><i class="fa fa-check"></i><b>1.1.3</b> The SAS Myth</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="preamble-intro.html"><a href="preamble-intro.html#prerequisites"><i class="fa fa-check"></i><b>1.2</b> Prerequisites</a></li>
<li class="chapter" data-level="1.3" data-path="preamble-intro.html"><a href="preamble-intro.html#content"><i class="fa fa-check"></i><b>1.3</b> Content</a></li>
<li class="chapter" data-level="1.4" data-path="preamble-intro.html"><a href="preamble-intro.html#structure"><i class="fa fa-check"></i><b>1.4</b> Structure</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="good-practices.html"><a href="good-practices.html"><i class="fa fa-check"></i><b>2</b> Good practices</a><ul>
<li class="chapter" data-level="2.1" data-path="good-practices.html"><a href="good-practices.html#coding-style"><i class="fa fa-check"></i><b>2.1</b> Coding style</a><ul>
<li class="chapter" data-level="2.1.1" data-path="good-practices.html"><a href="good-practices.html#comments"><i class="fa fa-check"></i><b>2.1.1</b> Comments</a></li>
<li class="chapter" data-level="2.1.2" data-path="good-practices.html"><a href="good-practices.html#naming"><i class="fa fa-check"></i><b>2.1.2</b> Naming</a></li>
<li class="chapter" data-level="2.1.3" data-path="good-practices.html"><a href="good-practices.html#spacing"><i class="fa fa-check"></i><b>2.1.3</b> Spacing</a></li>
<li class="chapter" data-level="2.1.4" data-path="good-practices.html"><a href="good-practices.html#indenting"><i class="fa fa-check"></i><b>2.1.4</b> Indenting</a></li>
<li class="chapter" data-level="2.1.5" data-path="good-practices.html"><a href="good-practices.html#long-lines"><i class="fa fa-check"></i><b>2.1.5</b> Long lines</a></li>
<li class="chapter" data-level="2.1.6" data-path="good-practices.html"><a href="good-practices.html#other"><i class="fa fa-check"></i><b>2.1.6</b> Other</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="good-practices.html"><a href="good-practices.html#coding-practices"><i class="fa fa-check"></i><b>2.2</b> Coding practices</a><ul>
<li class="chapter" data-level="2.2.1" data-path="good-practices.html"><a href="good-practices.html#variables"><i class="fa fa-check"></i><b>2.2.1</b> Variables</a></li>
<li class="chapter" data-level="2.2.2" data-path="good-practices.html"><a href="good-practices.html#rule-of-threedry"><i class="fa fa-check"></i><b>2.2.2</b> <em>Rule of Three</em></a></li>
<li class="chapter" data-level="2.2.3" data-path="good-practices.html"><a href="good-practices.html#path-names"><i class="fa fa-check"></i><b>2.2.3</b> Path names</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="good-practices.html"><a href="good-practices.html#rstudio"><i class="fa fa-check"></i><b>2.3</b> RStudio</a></li>
<li class="chapter" data-level="2.4" data-path="good-practices.html"><a href="good-practices.html#getting-help"><i class="fa fa-check"></i><b>2.4</b> Getting help</a><ul>
<li class="chapter" data-level="2.4.1" data-path="good-practices.html"><a href="good-practices.html#help-yourself-learn-how-to-debug"><i class="fa fa-check"></i><b>2.4.1</b> Help yourself, learn how to debug</a></li>
<li class="chapter" data-level="2.4.2" data-path="good-practices.html"><a href="good-practices.html#external-help"><i class="fa fa-check"></i><b>2.4.2</b> External help</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="good-practices.html"><a href="good-practices.html#keeping-up-to-date"><i class="fa fa-check"></i><b>2.5</b> Keeping up to date</a></li>
<li class="chapter" data-level="2.6" data-path="good-practices.html"><a href="good-practices.html#reading-for-next-class"><i class="fa fa-check"></i><b>2.6</b> Reading For Next Class</a></li>
<li class="chapter" data-level="2.7" data-path="good-practices.html"><a href="good-practices.html#exercises"><i class="fa fa-check"></i><b>2.7</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>II Base R Basics</b></span></li>
<li class="chapter" data-level="3" data-path="baser-rbasics.html"><a href="baser-rbasics.html"><i class="fa fa-check"></i><b>3</b> R Basics</a><ul>
<li class="chapter" data-level="3.1" data-path="baser-rbasics.html"><a href="baser-rbasics.html#assignment-operators"><i class="fa fa-check"></i><b>3.1</b> Assignment Operators</a></li>
<li class="chapter" data-level="3.2" data-path="baser-rbasics.html"><a href="baser-rbasics.html#naming-rules"><i class="fa fa-check"></i><b>3.2</b> Naming Rules</a></li>
<li class="chapter" data-level="3.3" data-path="baser-rbasics.html"><a href="baser-rbasics.html#objects"><i class="fa fa-check"></i><b>3.3</b> Objects</a><ul>
<li class="chapter" data-level="3.3.1" data-path="baser-rbasics.html"><a href="baser-rbasics.html#vector"><i class="fa fa-check"></i><b>3.3.1</b> Vector</a></li>
<li class="chapter" data-level="3.3.2" data-path="baser-rbasics.html"><a href="baser-rbasics.html#atomic-vectors"><i class="fa fa-check"></i><b>3.3.2</b> Atomic Vectors</a></li>
<li class="chapter" data-level="3.3.3" data-path="baser-rbasics.html"><a href="baser-rbasics.html#matrix"><i class="fa fa-check"></i><b>3.3.3</b> Matrix</a></li>
<li class="chapter" data-level="3.3.4" data-path="baser-rbasics.html"><a href="baser-rbasics.html#list"><i class="fa fa-check"></i><b>3.3.4</b> List</a></li>
<li class="chapter" data-level="3.3.5" data-path="baser-rbasics.html"><a href="baser-rbasics.html#data-frame"><i class="fa fa-check"></i><b>3.3.5</b> Data frame</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="baser-rbasics.html"><a href="baser-rbasics.html#comparision"><i class="fa fa-check"></i><b>3.4</b> Comparision</a></li>
<li class="chapter" data-level="3.5" data-path="baser-rbasics.html"><a href="baser-rbasics.html#logical-and-sets"><i class="fa fa-check"></i><b>3.5</b> Logical and sets</a></li>
<li class="chapter" data-level="3.6" data-path="baser-rbasics.html"><a href="baser-rbasics.html#control-structures"><i class="fa fa-check"></i><b>3.6</b> Control Structures</a><ul>
<li class="chapter" data-level="3.6.1" data-path="baser-rbasics.html"><a href="baser-rbasics.html#if-else"><i class="fa fa-check"></i><b>3.6.1</b> <code>if</code>-<code>else</code></a></li>
<li class="chapter" data-level="3.6.2" data-path="baser-rbasics.html"><a href="baser-rbasics.html#for-loops"><i class="fa fa-check"></i><b>3.6.2</b> <code>for</code> Loops</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="baser-rbasics.html"><a href="baser-rbasics.html#vectorization-recycling"><i class="fa fa-check"></i><b>3.7</b> Vectorization &amp; Recycling</a><ul>
<li class="chapter" data-level="3.7.1" data-path="baser-rbasics.html"><a href="baser-rbasics.html#example"><i class="fa fa-check"></i><b>3.7.1</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="baser-rbasics.html"><a href="baser-rbasics.html#reading-for-next-class-1"><i class="fa fa-check"></i><b>3.8</b> Reading For Next Class</a></li>
<li class="chapter" data-level="3.9" data-path="baser-rbasics.html"><a href="baser-rbasics.html#exercises-1"><i class="fa fa-check"></i><b>3.9</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>III Tidyverse</b></span></li>
<li class="chapter" data-level="4" data-path="data-import-export.html"><a href="data-import-export.html"><i class="fa fa-check"></i><b>4</b> Data Import &amp; Export</a><ul>
<li class="chapter" data-level="4.1" data-path="data-import-export.html"><a href="data-import-export.html#text-files"><i class="fa fa-check"></i><b>4.1</b> Text Files</a><ul>
<li class="chapter" data-level="4.1.1" data-path="data-import-export.html"><a href="data-import-export.html#readr"><i class="fa fa-check"></i><b>4.1.1</b> readr</a></li>
<li class="chapter" data-level="4.1.2" data-path="data-import-export.html"><a href="data-import-export.html#base-r"><i class="fa fa-check"></i><b>4.1.2</b> base R</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="data-import-export.html"><a href="data-import-export.html#sas-files"><i class="fa fa-check"></i><b>4.2</b> SAS Files</a></li>
<li class="chapter" data-level="4.3" data-path="data-import-export.html"><a href="data-import-export.html#excel"><i class="fa fa-check"></i><b>4.3</b> Excel</a></li>
<li class="chapter" data-level="4.4" data-path="data-import-export.html"><a href="data-import-export.html#databases"><i class="fa fa-check"></i><b>4.4</b> Databases</a></li>
<li class="chapter" data-level="4.5" data-path="data-import-export.html"><a href="data-import-export.html#reading-for-next-class-2"><i class="fa fa-check"></i><b>4.5</b> Reading For Next Class</a></li>
<li class="chapter" data-level="4.6" data-path="data-import-export.html"><a href="data-import-export.html#exercises-2"><i class="fa fa-check"></i><b>4.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>5</b> Data Transformation</a><ul>
<li class="chapter" data-level="5.1" data-path="data-transformation.html"><a href="data-transformation.html#tibbles"><i class="fa fa-check"></i><b>5.1</b> Tibbles</a></li>
<li class="chapter" data-level="5.2" data-path="data-transformation.html"><a href="data-transformation.html#filter-rows-with-filter"><i class="fa fa-check"></i><b>5.2</b> Filter rows with <code>filter()</code></a></li>
<li class="chapter" data-level="5.3" data-path="data-transformation.html"><a href="data-transformation.html#arrange-rows-with-arrange"><i class="fa fa-check"></i><b>5.3</b> Arrange rows with <code>arrange()</code></a></li>
<li class="chapter" data-level="5.4" data-path="data-transformation.html"><a href="data-transformation.html#select-columns-with-select"><i class="fa fa-check"></i><b>5.4</b> Select columns with <code>select()</code></a></li>
<li class="chapter" data-level="5.5" data-path="data-transformation.html"><a href="data-transformation.html#add-new-variables-with-mutate"><i class="fa fa-check"></i><b>5.5</b> Add new variables with <code>mutate()</code></a></li>
<li class="chapter" data-level="5.6" data-path="data-transformation.html"><a href="data-transformation.html#pipes"><i class="fa fa-check"></i><b>5.6</b> Pipes</a></li>
<li class="chapter" data-level="5.7" data-path="data-transformation.html"><a href="data-transformation.html#grouped-summaries-with-summarise"><i class="fa fa-check"></i><b>5.7</b> Grouped summaries with <code>summarise()</code></a></li>
<li class="chapter" data-level="5.8" data-path="data-transformation.html"><a href="data-transformation.html#grouped-mutates"><i class="fa fa-check"></i><b>5.8</b> Grouped mutates</a></li>
<li class="chapter" data-level="5.9" data-path="data-transformation.html"><a href="data-transformation.html#reading-for-next-class-3"><i class="fa fa-check"></i><b>5.9</b> Reading For Next Class</a></li>
<li class="chapter" data-level="5.10" data-path="data-transformation.html"><a href="data-transformation.html#exercises-3"><i class="fa fa-check"></i><b>5.10</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="tidy-data.html"><a href="tidy-data.html"><i class="fa fa-check"></i><b>6</b> Tidy Data</a><ul>
<li class="chapter" data-level="6.1" data-path="tidy-data.html"><a href="tidy-data.html#tidy-data-1"><i class="fa fa-check"></i><b>6.1</b> Tidy data</a></li>
<li class="chapter" data-level="6.2" data-path="tidy-data.html"><a href="tidy-data.html#example-1"><i class="fa fa-check"></i><b>6.2</b> Example</a></li>
<li class="chapter" data-level="6.3" data-path="tidy-data.html"><a href="tidy-data.html#spreading-and-gathering"><i class="fa fa-check"></i><b>6.3</b> Spreading and gathering</a><ul>
<li class="chapter" data-level="6.3.1" data-path="tidy-data.html"><a href="tidy-data.html#gathering"><i class="fa fa-check"></i><b>6.3.1</b> Gathering</a></li>
<li class="chapter" data-level="6.3.2" data-path="tidy-data.html"><a href="tidy-data.html#spreading"><i class="fa fa-check"></i><b>6.3.2</b> Spreading</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="tidy-data.html"><a href="tidy-data.html#separating-and-uniting"><i class="fa fa-check"></i><b>6.4</b> Separating and uniting</a><ul>
<li class="chapter" data-level="6.4.1" data-path="tidy-data.html"><a href="tidy-data.html#separate"><i class="fa fa-check"></i><b>6.4.1</b> Separate</a></li>
<li class="chapter" data-level="6.4.2" data-path="tidy-data.html"><a href="tidy-data.html#unite"><i class="fa fa-check"></i><b>6.4.2</b> Unite</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="tidy-data.html"><a href="tidy-data.html#missing-values"><i class="fa fa-check"></i><b>6.5</b> Missing values</a></li>
<li class="chapter" data-level="6.6" data-path="tidy-data.html"><a href="tidy-data.html#non-tidy-data"><i class="fa fa-check"></i><b>6.6</b> Non-tidy data</a></li>
</ul></li>
<li class="part"><span><b>IV Beyond Basics</b></span></li>
<li class="chapter" data-level="7" data-path="function-basics.html"><a href="function-basics.html"><i class="fa fa-check"></i><b>7</b> Function Basics</a><ul>
<li class="chapter" data-level="7.1" data-path="function-basics.html"><a href="function-basics.html#introduction-to-functions"><i class="fa fa-check"></i><b>7.1</b> Introduction to Functions</a><ul>
<li class="chapter" data-level="7.1.1" data-path="function-basics.html"><a href="function-basics.html#your-first-function"><i class="fa fa-check"></i><b>7.1.1</b> Your First Function</a></li>
<li class="chapter" data-level="7.1.2" data-path="function-basics.html"><a href="function-basics.html#lazy-evaluation"><i class="fa fa-check"></i><b>7.1.2</b> Lazy Evaluation</a></li>
<li class="chapter" data-level="7.1.3" data-path="function-basics.html"><a href="function-basics.html#the-dot-dot-dot-...-argument"><i class="fa fa-check"></i><b>7.1.3</b> The Dot-dot-dot (<code>...</code>) Argument</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="function-basics.html"><a href="function-basics.html#environments-scoping"><i class="fa fa-check"></i><b>7.2</b> Environments &amp; Scoping</a></li>
<li class="chapter" data-level="7.3" data-path="function-basics.html"><a href="function-basics.html#first-class-objects"><i class="fa fa-check"></i><b>7.3</b> “First class objects”</a></li>
<li class="chapter" data-level="7.4" data-path="function-basics.html"><a href="function-basics.html#exercises-4"><i class="fa fa-check"></i><b>7.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>8</b> R Markdown</a><ul>
<li class="chapter" data-level="8.1" data-path="r-markdown.html"><a href="r-markdown.html#introduction"><i class="fa fa-check"></i><b>8.1</b> Introduction</a><ul>
<li class="chapter" data-level="8.1.1" data-path="r-markdown.html"><a href="r-markdown.html#code-languages"><i class="fa fa-check"></i><b>8.1.1</b> Code languages</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="r-markdown.html"><a href="r-markdown.html#markdown-basics"><i class="fa fa-check"></i><b>8.2</b> Markdown Basics</a><ul>
<li class="chapter" data-level="8.2.1" data-path="r-markdown.html"><a href="r-markdown.html#headers"><i class="fa fa-check"></i><b>8.2.1</b> Headers</a></li>
<li class="chapter" data-level="8.2.2" data-path="r-markdown.html"><a href="r-markdown.html#paragraph-breaks-and-forced-line-breaks"><i class="fa fa-check"></i><b>8.2.2</b> Paragraph Breaks and Forced Line Breaks</a></li>
<li class="chapter" data-level="8.2.3" data-path="r-markdown.html"><a href="r-markdown.html#italics-and-boldface"><i class="fa fa-check"></i><b>8.2.3</b> Italics and Boldface</a></li>
<li class="chapter" data-level="8.2.4" data-path="r-markdown.html"><a href="r-markdown.html#bullet-points"><i class="fa fa-check"></i><b>8.2.4</b> Bullet Points</a></li>
<li class="chapter" data-level="8.2.5" data-path="r-markdown.html"><a href="r-markdown.html#numbered-lists"><i class="fa fa-check"></i><b>8.2.5</b> Numbered Lists</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="r-markdown.html"><a href="r-markdown.html#math"><i class="fa fa-check"></i><b>8.3</b> Math</a></li>
<li class="chapter" data-level="8.4" data-path="r-markdown.html"><a href="r-markdown.html#code-chunks"><i class="fa fa-check"></i><b>8.4</b> Code Chunks</a><ul>
<li class="chapter" data-level="8.4.1" data-path="r-markdown.html"><a href="r-markdown.html#chunk-names"><i class="fa fa-check"></i><b>8.4.1</b> Chunk Names</a></li>
<li class="chapter" data-level="8.4.2" data-path="r-markdown.html"><a href="r-markdown.html#chunk-options"><i class="fa fa-check"></i><b>8.4.2</b> Chunk Options</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="r-markdown.html"><a href="r-markdown.html#inline-code"><i class="fa fa-check"></i><b>8.5</b> Inline Code</a></li>
<li class="chapter" data-level="8.6" data-path="r-markdown.html"><a href="r-markdown.html#plots"><i class="fa fa-check"></i><b>8.6</b> Plots</a></li>
<li class="chapter" data-level="8.7" data-path="r-markdown.html"><a href="r-markdown.html#tables"><i class="fa fa-check"></i><b>8.7</b> Tables</a></li>
<li class="chapter" data-level="8.8" data-path="r-markdown.html"><a href="r-markdown.html#yaml"><i class="fa fa-check"></i><b>8.8</b> YAML</a><ul>
<li class="chapter" data-level="8.8.1" data-path="r-markdown.html"><a href="r-markdown.html#table-of-contents"><i class="fa fa-check"></i><b>8.8.1</b> Table of Contents</a></li>
<li class="chapter" data-level="8.8.2" data-path="r-markdown.html"><a href="r-markdown.html#parameterized-reports"><i class="fa fa-check"></i><b>8.8.2</b> Parameterized reports</a></li>
<li class="chapter" data-level="8.8.3" data-path="r-markdown.html"><a href="r-markdown.html#output-types"><i class="fa fa-check"></i><b>8.8.3</b> Output Types</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>V Appendix</b></span></li>
<li class="chapter" data-level="9" data-path="appendix-resources.html"><a href="appendix-resources.html"><i class="fa fa-check"></i><b>9</b> Appendix A</a><ul>
<li class="chapter" data-level="9.1" data-path="appendix-resources.html"><a href="appendix-resources.html#e-books"><i class="fa fa-check"></i><b>9.1</b> E-Books</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Modern R in a Corporate Environment</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-transformation" class="section level1">
<h1><span class="header-section-number">5</span> Data Transformation</h1>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)</code></pre></div>
<div id="tibbles" class="section level2">
<h2><span class="header-section-number">5.1</span> Tibbles</h2>
<p>Tibbles <strong>are</strong> data frames, but they tweak some older behaviors to make life a little easier. R is an old language, and some things that were useful 10 or 20 years ago now get in your way. It’s difficult to change base R without breaking existing code, so most innovation occurs in packages.</p>

<div class="rmdimportant">
See Chapter 7 in <a href="http://r4ds.had.co.nz/tibbles.html">R for Data Science</a> and <code>vignette(&quot;tibble&quot;)</code> for a more complete description of tibbles.
</div>

<p>Key advantages of tibbles:</p>
<ul>
<li>Never changes the types of the inputs (e.g. it never converts strings to factors!).</li>
<li>Never changes the names of variables.</li>
<li>Never creates row names.</li>
<li>Refined printing to the console:
<ul>
<li>only prints the first 10 rows</li>
<li>shows the data type of each column</li>
<li>highlights missing values</li>
<li>aligns numeric data</li>
</ul></li>
<li>Enhanced subsetting</li>
</ul>
<p>When creating a tibble:</p>
<ul>
<li>it will <strong>ONLY</strong> recycle inputs of length 1</li>
<li>you can refer to variables you just created</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mytibble &lt;-<span class="st"> </span><span class="kw">tibble</span>(
  <span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, 
  <span class="dt">y =</span> <span class="dv">1</span>, 
  <span class="dt">z =</span> x <span class="op">^</span><span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>y
)

<span class="co"># versus</span>

mydf &lt;-<span class="st"> </span><span class="kw">data.frame</span>(
  <span class="dt">x =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>,
  <span class="dt">y =</span> <span class="dv">1</span>
)

mydf<span class="op">$</span>z &lt;-<span class="st"> </span>mydf<span class="op">$</span>x<span class="op">^</span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span>mydf<span class="op">$</span>y

mytibble
<span class="co">#&gt; # A tibble: 5 x 3</span>
<span class="co">#&gt;       x     y     z</span>
<span class="co">#&gt;   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1     1     1     2</span>
<span class="co">#&gt; 2     2     1     5</span>
<span class="co">#&gt; 3     3     1    10</span>
<span class="co">#&gt; 4     4     1    17</span>
<span class="co">#&gt; 5     5     1    26</span>
mydf
<span class="co">#&gt;   x y  z</span>
<span class="co">#&gt; 1 1 1  2</span>
<span class="co">#&gt; 2 2 1  5</span>
<span class="co">#&gt; 3 3 1 10</span>
<span class="co">#&gt; 4 4 1 17</span>
<span class="co">#&gt; 5 5 1 26</span></code></pre></div>
<p>For the most part you can use data.frames and tibbles interchangeably. However, some older functions in base R do not work properly with tibbles. This is because of the <code>[</code> subset operator. As we saw in subsetting, if you return a single column with <code>[</code> on a data.frame you will get a vector back instead of a single column data.frame. Tibbles always return tibbles and never a vector.</p>
<p>You can convert a data frame to a tibble with <code>as_tibble()</code>, while you can coerce a tibble to a data frame with <code>as.data.fame()</code>.</p>

<div class="rmdimportant">
dplyr functions never modify their inputs, so if you want to save the result, you’ll need to use the assignment operator, <code>&lt;-</code>
</div>

</div>
<div id="filter-rows-with-filter" class="section level2">
<h2><span class="header-section-number">5.2</span> Filter rows with <code>filter()</code></h2>
<p><code>filter()</code> allows you to subset observations based on their values. The first argument is the name of the data frame. The second and subsequent arguments are the expressions that filter the data frame.</p>
</div>
<div id="arrange-rows-with-arrange" class="section level2">
<h2><span class="header-section-number">5.3</span> Arrange rows with <code>arrange()</code></h2>
<p><code>arrange()</code> works similarly to <code>filter()</code> except that instead of selecting rows, it changes their order. It takes a data frame and a set of column names (or more complicated expressions) to order by. If you provide more than one column name, each additional column will be used to break ties in the values of preceding columns.</p>
<p>Notes:</p>
<ul>
<li>Use <code>desc()</code> to re-order by a column in descending order:</li>
<li>Missing values are always sorted at the end.</li>
</ul>
</div>
<div id="select-columns-with-select" class="section level2">
<h2><span class="header-section-number">5.4</span> Select columns with <code>select()</code></h2>
<p>It’s not uncommon to get datasets with hundreds or even thousands of variables. In this case, the first challenge is often narrowing in on the variables you’re actually interested in. <code>select()</code> allows you to rapidly zoom in on a useful subset using operations based on the names of the variables.</p>
<p>There are a number of helper functions you can use within select():</p>
<ul>
<li>everything(): all variables or everything else not already selected / deselected.</li>
<li>starts_with(): start with a prefix.</li>
<li>ends_with(): ends with a prefix</li>
<li>contains(): contains a literal string</li>
<li>matches(): match a regular expression.</li>
<li>num_range(): a numerical range like x1, x2, x3.</li>
<li>one_of(): variable in a character vector</li>
</ul>
<div class="rmdnote">
<p>
Closely related to <code>select()</code> is <code>rename()</code> for renaming columns.
</p>
</div>
</div>
<div id="add-new-variables-with-mutate" class="section level2">
<h2><span class="header-section-number">5.5</span> Add new variables with <code>mutate()</code></h2>
<p>Besides selecting sets of existing columns, it’s often useful to add new columns that are functions of existing columns. <code>mutate()</code> always adds new columns at the end of your dataset so we’ll start by creating a narrower dataset so we can see the new variables. Remember that when you’re in RStudio, the easiest way to see all the columns is <code>View()</code>.</p>
<p>Because we have are using tibbles you can refer to columns you just created.</p>
<div class="rmdtip">
<p>
If you only want to keep the new variables, use <code>transmute()</code>.
</p>
</div>
<p>There are a number of helper functions you can use within mutate():</p>
<ul>
<li>na_if(): convert values to NA</li>
<li>replace_na(): convert NA to a value</li>
<li>if_else(): vectorised if</li>
<li>recode(): recode values</li>
<li>case_when(): A general vectorised if. Equivalent of the SQL CASE WHEN statement.</li>
</ul>
</div>
<div id="pipes" class="section level2">
<h2><span class="header-section-number">5.6</span> Pipes</h2>

<div class="rmdimportant">
See Chapter 14 in <a href="http://r4ds.had.co.nz/pipes.html">R for Data Science</a>.
</div>

<p>Typically it takes a series of operations to go from raw data to meaningful analysis. There are (at least) four ways to to do this:</p>
<ul>
<li>Save each intermediate step as a new object.</li>
<li>Overwrite the original object many times.</li>
<li>Compose functions.</li>
<li>Use pipes</li>
</ul>
<p>Each have the place and utility. None are perfect for every situation. We’ll use piping frequently from now on because it considerably improves the readability of code.</p>
</div>
<div id="grouped-summaries-with-summarise" class="section level2">
<h2><span class="header-section-number">5.7</span> Grouped summaries with <code>summarise()</code></h2>
<p>The last key verb is <code>summarise()</code>. It collapses a data frame to a single row. <code>summarise()</code> is not terribly useful unless we pair it with <code>group_by()</code>. This changes the unit of analysis from the complete dataset to individual groups. Then, when you use the dplyr verbs on a grouped data frame they’ll be automatically applied “by group”.</p>
<p>Together <code>group_by()</code> and <code>summarise()</code> provide one of the tools that you’ll use most commonly when working with dplyr: grouped summaries.</p>

<div class="rmdimportant">
If you need to remove grouping, and return to operations on ungrouped data, use ungroup()
</div>

</div>
<div id="grouped-mutates" class="section level2">
<h2><span class="header-section-number">5.8</span> Grouped mutates</h2>
<p>Grouping is most useful in conjunction with <code>summarise()</code>, but you can also do convenient operations with <code>mutate()</code> and <code>filter()</code></p>
<ul>
<li>Find the best/worst members of each group.</li>
<li>Find all groups bigger/smaller than a threshold.</li>
<li>Standardize to compute per group metrics.</li>
</ul>
</div>
<div id="reading-for-next-class-3" class="section level2">
<h2><span class="header-section-number">5.9</span> Reading For Next Class</h2>
<ol style="list-style-type: decimal">
<li>Read Tidy Data paper published in the Journal of Statistical Software, <a href="http://www.jstatsoft.org/v59/i10/paper" class="uri">http://www.jstatsoft.org/v59/i10/paper</a>.</li>
</ol>
</div>
<div id="exercises-3" class="section level2">
<h2><span class="header-section-number">5.10</span> Exercises</h2>
<ol style="list-style-type: decimal">
<li><p>Read and Try the exercises in <a href="https://r4ds.had.co.nz/transform.html">Data transformation</a>. There are quite a few useful functions and use cases we did not cover. It also does a very good job of how does one go from a question we want answered to quickly seeing the answer in a useful form.</p></li>
<li><p>We barely scratched the surface of some of the useful dplyr functions for data transformations. Review the dplyr-transformation <a href="https://www.rstudio.com/resources/cheatsheets/#dplyr">cheatsheet</a> and see the help file for interesting functions.</p></li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-import-export.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tidy-data.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/DavisBrian/corporater/edit/master/data-transform.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["rclassnotes.pdf", "rclassnotes.epub"],
"toc": {
"collapse": "section"
},
"css": "corp.css"
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
