<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Modern R in a Corporate Environment</title>
  <meta name="description" content="This is an original course for RADARS">
  <meta name="generator" content="bookdown 0.6 and GitBook 2.6.7">

  <meta property="og:title" content="Modern R in a Corporate Environment" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is an original course for RADARS" />
  <meta name="github-repo" content="DavisBrian/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Modern R in a Corporate Environment" />
  
  <meta name="twitter:description" content="This is an original course for RADARS" />
  

<meta name="author" content="Brian Davis">


<meta name="date" content="2018-04-23">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="good-practices.html">
<link rel="next" href="base-r-data-structures.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Modern R in a Corporate Environment</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#course-philosophy"><i class="fa fa-check"></i><b>1.1</b> Course Philosophy</a><ul>
<li class="chapter" data-level="1.1.1" data-path="introduction.html"><a href="introduction.html#reproducible-research"><i class="fa fa-check"></i><b>1.1.1</b> Reproducible Research</a></li>
<li class="chapter" data-level="1.1.2" data-path="introduction.html"><a href="introduction.html#fda-validation"><i class="fa fa-check"></i><b>1.1.2</b> FDA Validation</a></li>
<li class="chapter" data-level="1.1.3" data-path="introduction.html"><a href="introduction.html#the-sas-myth"><i class="fa fa-check"></i><b>1.1.3</b> The SAS Myth</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#prerequisites"><i class="fa fa-check"></i><b>1.2</b> Prerequisites</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#content"><i class="fa fa-check"></i><b>1.3</b> Content</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#structure"><i class="fa fa-check"></i><b>1.4</b> Structure</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="good-practices.html"><a href="good-practices.html"><i class="fa fa-check"></i><b>2</b> Good practices</a><ul>
<li class="chapter" data-level="2.1" data-path="good-practices.html"><a href="good-practices.html#coding-style"><i class="fa fa-check"></i><b>2.1</b> Coding style</a><ul>
<li class="chapter" data-level="2.1.1" data-path="good-practices.html"><a href="good-practices.html#comments"><i class="fa fa-check"></i><b>2.1.1</b> Comments</a></li>
<li class="chapter" data-level="2.1.2" data-path="good-practices.html"><a href="good-practices.html#naming"><i class="fa fa-check"></i><b>2.1.2</b> Naming</a></li>
<li class="chapter" data-level="2.1.3" data-path="good-practices.html"><a href="good-practices.html#structure-1"><i class="fa fa-check"></i><b>2.1.3</b> Structure</a></li>
<li class="chapter" data-level="2.1.4" data-path="good-practices.html"><a href="good-practices.html#spacing"><i class="fa fa-check"></i><b>2.1.4</b> Spacing</a></li>
<li class="chapter" data-level="2.1.5" data-path="good-practices.html"><a href="good-practices.html#indenting"><i class="fa fa-check"></i><b>2.1.5</b> Indenting</a></li>
<li class="chapter" data-level="2.1.6" data-path="good-practices.html"><a href="good-practices.html#long-lines"><i class="fa fa-check"></i><b>2.1.6</b> Long lines</a></li>
<li class="chapter" data-level="2.1.7" data-path="good-practices.html"><a href="good-practices.html#other"><i class="fa fa-check"></i><b>2.1.7</b> Other</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="good-practices.html"><a href="good-practices.html#coding-practices"><i class="fa fa-check"></i><b>2.2</b> Coding practices</a><ul>
<li class="chapter" data-level="2.2.1" data-path="good-practices.html"><a href="good-practices.html#variables"><i class="fa fa-check"></i><b>2.2.1</b> Variables</a></li>
<li class="chapter" data-level="2.2.2" data-path="good-practices.html"><a href="good-practices.html#rule-of-3"><i class="fa fa-check"></i><b>2.2.2</b> <em>Rule of 3</em></a></li>
<li class="chapter" data-level="2.2.3" data-path="good-practices.html"><a href="good-practices.html#path-names"><i class="fa fa-check"></i><b>2.2.3</b> Path names</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="good-practices.html"><a href="good-practices.html#rstudio"><i class="fa fa-check"></i><b>2.3</b> RStudio</a></li>
<li class="chapter" data-level="2.4" data-path="good-practices.html"><a href="good-practices.html#getting-help"><i class="fa fa-check"></i><b>2.4</b> Getting help</a><ul>
<li class="chapter" data-level="2.4.1" data-path="good-practices.html"><a href="good-practices.html#help-yourself-learn-how-to-debug"><i class="fa fa-check"></i><b>2.4.1</b> Help yourself, learn how to debug</a></li>
<li class="chapter" data-level="2.4.2" data-path="good-practices.html"><a href="good-practices.html#external-help"><i class="fa fa-check"></i><b>2.4.2</b> External help</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="good-practices.html"><a href="good-practices.html#keeping-up-to-date"><i class="fa fa-check"></i><b>2.5</b> Keeping up to date</a></li>
<li class="chapter" data-level="2.6" data-path="good-practices.html"><a href="good-practices.html#assignement"><i class="fa fa-check"></i><b>2.6</b> Assignement</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>3</b> R Basics</a><ul>
<li class="chapter" data-level="3.1" data-path="r-basics.html"><a href="r-basics.html#assignment"><i class="fa fa-check"></i><b>3.1</b> Assignment</a></li>
<li class="chapter" data-level="3.2" data-path="r-basics.html"><a href="r-basics.html#objects"><i class="fa fa-check"></i><b>3.2</b> Objects</a><ul>
<li class="chapter" data-level="3.2.1" data-path="r-basics.html"><a href="r-basics.html#vector"><i class="fa fa-check"></i><b>3.2.1</b> Vector</a></li>
<li class="chapter" data-level="3.2.2" data-path="r-basics.html"><a href="r-basics.html#matrix"><i class="fa fa-check"></i><b>3.2.2</b> Matrix</a></li>
<li class="chapter" data-level="3.2.3" data-path="r-basics.html"><a href="r-basics.html#list"><i class="fa fa-check"></i><b>3.2.3</b> List</a></li>
<li class="chapter" data-level="3.2.4" data-path="r-basics.html"><a href="r-basics.html#data-frame"><i class="fa fa-check"></i><b>3.2.4</b> Data frame</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="r-basics.html"><a href="r-basics.html#comparision"><i class="fa fa-check"></i><b>3.3</b> Comparision</a></li>
<li class="chapter" data-level="3.4" data-path="r-basics.html"><a href="r-basics.html#logical-and-sets"><i class="fa fa-check"></i><b>3.4</b> Logical and sets</a></li>
<li class="chapter" data-level="3.5" data-path="r-basics.html"><a href="r-basics.html#vectorization-recycling"><i class="fa fa-check"></i><b>3.5</b> Vectorization &amp; Recycling</a></li>
<li class="chapter" data-level="3.6" data-path="r-basics.html"><a href="r-basics.html#control-structures"><i class="fa fa-check"></i><b>3.6</b> Control Structures</a><ul>
<li class="chapter" data-level="3.6.1" data-path="r-basics.html"><a href="r-basics.html#if-else"><i class="fa fa-check"></i><b>3.6.1</b> <code>if</code>-<code>else</code></a></li>
<li class="chapter" data-level="3.6.2" data-path="r-basics.html"><a href="r-basics.html#for-loops"><i class="fa fa-check"></i><b>3.6.2</b> <code>for</code> Loops</a></li>
<li class="chapter" data-level="3.6.3" data-path="r-basics.html"><a href="r-basics.html#while-loops"><i class="fa fa-check"></i><b>3.6.3</b> <code>while</code> Loops</a></li>
<li class="chapter" data-level="3.6.4" data-path="r-basics.html"><a href="r-basics.html#repeat-loops"><i class="fa fa-check"></i><b>3.6.4</b> <code>repeat</code> Loops</a></li>
<li class="chapter" data-level="3.6.5" data-path="r-basics.html"><a href="r-basics.html#next-break"><i class="fa fa-check"></i><b>3.6.5</b> <code>next</code>, <code>break</code></a></li>
<li class="chapter" data-level="3.6.6" data-path="r-basics.html"><a href="r-basics.html#looping"><i class="fa fa-check"></i><b>3.6.6</b> Looping</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="r-basics.html"><a href="r-basics.html#function-basics"><i class="fa fa-check"></i><b>3.7</b> Function Basics</a></li>
<li class="chapter" data-level="3.8" data-path="r-basics.html"><a href="r-basics.html#environments-scoping"><i class="fa fa-check"></i><b>3.8</b> Environments &amp; Scoping</a></li>
<li class="chapter" data-level="3.9" data-path="r-basics.html"><a href="r-basics.html#assignment-1"><i class="fa fa-check"></i><b>3.9</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="base-r-data-structures.html"><a href="base-r-data-structures.html"><i class="fa fa-check"></i><b>4</b> Base R Data Structures</a><ul>
<li class="chapter" data-level="4.1" data-path="base-r-data-structures.html"><a href="base-r-data-structures.html#naming-rules"><i class="fa fa-check"></i><b>4.1</b> Naming Rules</a></li>
<li class="chapter" data-level="4.2" data-path="base-r-data-structures.html"><a href="base-r-data-structures.html#vectors"><i class="fa fa-check"></i><b>4.2</b> Vectors</a><ul>
<li class="chapter" data-level="4.2.1" data-path="base-r-data-structures.html"><a href="base-r-data-structures.html#atomic-vectors"><i class="fa fa-check"></i><b>4.2.1</b> Atomic Vectors</a></li>
<li class="chapter" data-level="4.2.2" data-path="base-r-data-structures.html"><a href="base-r-data-structures.html#lists"><i class="fa fa-check"></i><b>4.2.2</b> Lists</a></li>
<li class="chapter" data-level="4.2.3" data-path="base-r-data-structures.html"><a href="base-r-data-structures.html#null"><i class="fa fa-check"></i><b>4.2.3</b> <code>NULL</code></a></li>
<li class="chapter" data-level="4.2.4" data-path="base-r-data-structures.html"><a href="base-r-data-structures.html#attributes"><i class="fa fa-check"></i><b>4.2.4</b> Attributes</a></li>
<li class="chapter" data-level="4.2.5" data-path="base-r-data-structures.html"><a href="base-r-data-structures.html#matrices-and-arrays"><i class="fa fa-check"></i><b>4.2.5</b> Matrices and arrays</a></li>
<li class="chapter" data-level="4.2.6" data-path="base-r-data-structures.html"><a href="base-r-data-structures.html#data-frames"><i class="fa fa-check"></i><b>4.2.6</b> Data Frames</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="subsetting.html"><a href="subsetting.html"><i class="fa fa-check"></i><b>5</b> Subsetting</a><ul>
<li class="chapter" data-level="5.1" data-path="subsetting.html"><a href="subsetting.html#selecting-multiple-elements"><i class="fa fa-check"></i><b>5.1</b> Selecting multiple elements <code>[</code></a><ul>
<li class="chapter" data-level="5.1.1" data-path="subsetting.html"><a href="subsetting.html#atomic-vectors-1"><i class="fa fa-check"></i><b>5.1.1</b> Atomic vectors</a></li>
<li class="chapter" data-level="5.1.2" data-path="subsetting.html"><a href="subsetting.html#matrices-and-arrays-1"><i class="fa fa-check"></i><b>5.1.2</b> Matrices and Arrays</a></li>
<li class="chapter" data-level="5.1.3" data-path="subsetting.html"><a href="subsetting.html#lists-1"><i class="fa fa-check"></i><b>5.1.3</b> Lists</a></li>
<li class="chapter" data-level="5.1.4" data-path="subsetting.html"><a href="subsetting.html#data-frames-1"><i class="fa fa-check"></i><b>5.1.4</b> Data Frames</a></li>
<li class="chapter" data-level="5.1.5" data-path="subsetting.html"><a href="subsetting.html#preserving-dimensionality"><i class="fa fa-check"></i><b>5.1.5</b> Preserving dimensionality</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="subsetting.html"><a href="subsetting.html#selecting-a-single-elements"><i class="fa fa-check"></i><b>5.2</b> Selecting a single elements</a><ul>
<li class="chapter" data-level="5.2.1" data-path="subsetting.html"><a href="subsetting.html#section"><i class="fa fa-check"></i><b>5.2.1</b> <code>$</code></a></li>
<li class="chapter" data-level="5.2.2" data-path="subsetting.html"><a href="subsetting.html#missingout-of-bounds-indices"><i class="fa fa-check"></i><b>5.2.2</b> Missing/out of bounds indices</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="subsetting.html"><a href="subsetting.html#subassignment"><i class="fa fa-check"></i><b>5.3</b> Subsetting and assignment</a></li>
<li class="chapter" data-level="5.4" data-path="subsetting.html"><a href="subsetting.html#applications"><i class="fa fa-check"></i><b>5.4</b> Applications</a><ul>
<li class="chapter" data-level="5.4.1" data-path="subsetting.html"><a href="subsetting.html#lookup-tables-character-subsetting"><i class="fa fa-check"></i><b>5.4.1</b> Lookup tables (character subsetting)</a></li>
<li class="chapter" data-level="5.4.2" data-path="subsetting.html"><a href="subsetting.html#ordering-integer-subsetting"><i class="fa fa-check"></i><b>5.4.2</b> Ordering (integer subsetting)</a></li>
<li class="chapter" data-level="5.4.3" data-path="subsetting.html"><a href="subsetting.html#selecting-rows-based-on-a-condition-logical-subsetting"><i class="fa fa-check"></i><b>5.4.3</b> Selecting rows based on a condition (logical subsetting)</a></li>
<li class="chapter" data-level="5.4.4" data-path="subsetting.html"><a href="subsetting.html#boolean-algebra-vs.sets-logical-integer-subsetting"><i class="fa fa-check"></i><b>5.4.4</b> Boolean algebra vs. sets (logical &amp; integer subsetting)</a></li>
<li class="chapter" data-level="5.4.5" data-path="subsetting.html"><a href="subsetting.html#removing-columns-from-data-frames-character-subsetting"><i class="fa fa-check"></i><b>5.4.5</b> Removing columns from data frames (character subsetting)</a></li>
<li class="chapter" data-level="5.4.6" data-path="subsetting.html"><a href="subsetting.html#matching-and-merging-by-hand-integer-subsetting"><i class="fa fa-check"></i><b>5.4.6</b> Matching and merging by hand (integer subsetting)</a></li>
<li class="chapter" data-level="5.4.7" data-path="subsetting.html"><a href="subsetting.html#random-samplesbootstrap-integer-subsetting"><i class="fa fa-check"></i><b>5.4.7</b> Random samples/bootstrap (integer subsetting)</a></li>
<li class="chapter" data-level="5.4.8" data-path="subsetting.html"><a href="subsetting.html#expanding-aggregated-counts-integer-subsetting"><i class="fa fa-check"></i><b>5.4.8</b> Expanding aggregated counts (integer subsetting)</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Modern R in a Corporate Environment</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-basics" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> R Basics</h1>
<p>With over 10,000 packages on CRAN we can’t cover everything. In general there are several ways, or packages, to accomplish a given task.</p>
<p>Here is a quick look at some of the basics. Next we’ll dive deep into R’s basic data structures and how to subset them in subsequent chapters. This will give us a good overview of base R and the background needed to dive into <strong>R for Data Science</strong>.</p>
<p>The three most important functions in R <code>?</code>, <code>??</code>, and <code>str</code>:</p>
<ul>
<li><code>?&lt;topic&gt;</code> provides access to the documentation for &lt;topic&gt;.</li>
<li><code>??&lt;topic&gt;</code> searches the documention for &lt;topic&gt;.</li>
<li><code>str</code> displays the structure of an R object in human readable form.</li>
</ul>
<p>See this <a href="http://adv-r.had.co.nz/Vocabulary.html">vocabulary list</a> for a good starting point on the basics functions in base R and some important libraries.</p>
<p>A book to learn the basics is <a href="https://bookdown.org/rdpeng/rprogdatascience/">R Programmig for Data Science</a></p>
<p>In R there three basic constructs; objects, functions, and environments:</p>
<div id="assignment" class="section level2">
<h2><span class="header-section-number">3.1</span> Assignment</h2>
<p>We saw this is Coding Style. Use <code>&lt;-</code> for assignment and use <code>=</code> for parameters. While you can use <code>=</code> for assignment it is generally considered bad practice.</p>
</div>
<div id="objects" class="section level2">
<h2><span class="header-section-number">3.2</span> Objects</h2>
<div id="vector" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Vector</h3>
<p>You create a vector with <code>c</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">v &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;my&quot;</span>, <span class="st">&quot;first&quot;</span>, <span class="st">&quot;vector&quot;</span>)
v</code></pre></div>
<pre><code>#&gt; [1] &quot;my&quot;     &quot;first&quot;  &quot;vector&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># length of our vector</span>
<span class="kw">length</span>(v)</code></pre></div>
<pre><code>#&gt; [1] 3</code></pre>
<p>There are several shortcut functions for common vector creation.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># create an ordered sequence</span>
<span class="dv">2</span><span class="op">:</span><span class="dv">10</span></code></pre></div>
<pre><code>#&gt; [1]  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">9</span><span class="op">:</span><span class="dv">3</span></code></pre></div>
<pre><code>#&gt; [1] 9 8 7 6 5 4 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># common mistake using 1:length(n) in loops</span>
<span class="co"># but if n = 0</span>
<span class="dv">1</span><span class="op">:</span><span class="dv">0</span></code></pre></div>
<pre><code>#&gt; [1] 1 0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># use seq_len(n) instead and the loop won&#39;t execute</span>
<span class="kw">seq_len</span>(<span class="dv">0</span>)</code></pre></div>
<pre><code>#&gt; integer(0)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># another common mistake</span>
n &lt;-<span class="st"> </span><span class="dv">6</span>
<span class="dv">1</span><span class="op">:</span>n<span class="op">+</span><span class="dv">1</span>        <span class="co"># is (1:n) + 1, so 2:(n + 1)</span></code></pre></div>
<pre><code>#&gt; [1] 2 3 4 5 6 7</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">1</span><span class="op">:</span>(n<span class="op">+</span><span class="dv">1</span>)      <span class="co"># usually what is meant</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 3 4 5 6 7</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq_len</span>(n<span class="op">+</span><span class="dv">1</span>) <span class="co"># another way</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 3 4 5 6 7</code></pre>
</div>
<div id="matrix" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Matrix</h3>
<p>Matrices are 2D vectors, with all elements of the same type. Genearlly used for mathematics.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># fill in column order (default)</span>
<span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>, <span class="dt">nrow =</span> <span class="dv">3</span>)</code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]    1    4    7   10
#&gt; [2,]    2    5    8   11
#&gt; [3,]    3    6    9   12</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># fill in row order</span>
<span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>, <span class="dt">nrow =</span> <span class="dv">3</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]    1    2    3    4
#&gt; [2,]    5    6    7    8
#&gt; [3,]    9   10   11   12</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># can also specify the number of columns instead</span>
<span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>, <span class="dt">ncol =</span> <span class="dv">3</span>)</code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3]
#&gt; [1,]    1    5    9
#&gt; [2,]    2    6   10
#&gt; [3,]    3    7   11
#&gt; [4,]    4    8   12</code></pre>
<p>You find the dimensions of a matrix with <code>nrow</code>, <code>ncol</code>, and <code>dim</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">m &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>, <span class="dt">ncol =</span> <span class="dv">3</span>)
<span class="kw">dim</span>(m)</code></pre></div>
<pre><code>#&gt; [1] 4 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nrow</span>(m)</code></pre></div>
<pre><code>#&gt; [1] 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ncol</span>(m)</code></pre></div>
<pre><code>#&gt; [1] 3</code></pre>
</div>
<div id="list" class="section level3">
<h3><span class="header-section-number">3.2.3</span> List</h3>
<p>A list is a generic vector containing other objects. These do <strong>NOT</strong> have to be the same type or the same length.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">s &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;aa&quot;</span>, <span class="st">&quot;bb&quot;</span>, <span class="st">&quot;cc&quot;</span>, <span class="st">&quot;dd&quot;</span>, <span class="st">&quot;ee&quot;</span>) 
b &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>) 
<span class="co"># x contains copies of n, s, b and our matrix from above</span>
x &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">n =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>) , s, b, <span class="dv">3</span>, m)   
x</code></pre></div>
<pre><code>#&gt; $n
#&gt; [1] 2 3 5
#&gt; 
#&gt; [[2]]
#&gt; [1] &quot;aa&quot; &quot;bb&quot; &quot;cc&quot; &quot;dd&quot; &quot;ee&quot;
#&gt; 
#&gt; [[3]]
#&gt; [1]  TRUE FALSE  TRUE FALSE FALSE
#&gt; 
#&gt; [[4]]
#&gt; [1] 3
#&gt; 
#&gt; [[5]]
#&gt;      [,1] [,2] [,3]
#&gt; [1,]    1    5    9
#&gt; [2,]    2    6   10
#&gt; [3,]    3    7   11
#&gt; [4,]    4    8   12</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># length gives you length of the list not the elements in the list</span>
<span class="kw">length</span>(x)</code></pre></div>
<pre><code>#&gt; [1] 5</code></pre>
<p>We’ll discuss lists in detail in the next chapter.</p>
</div>
<div id="data-frame" class="section level3">
<h3><span class="header-section-number">3.2.4</span> Data frame</h3>
<p>A data frame is a list with each vector of the same length. This is the main data structure used and is analagous to a data set in SAS. While these <strong>look</strong> like matrices they behave very different.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df =<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">n =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>),
                <span class="dt">s =</span> <span class="kw">c</span>(<span class="st">&quot;aa&quot;</span>, <span class="st">&quot;bb&quot;</span>, <span class="st">&quot;cc&quot;</span>),
                <span class="dt">b =</span> <span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>),
                <span class="dt">y =</span> v
                )       <span class="co"># df is a data frame </span>
df</code></pre></div>
<pre><code>#&gt;   n  s     b      y
#&gt; 1 2 aa  TRUE     my
#&gt; 2 3 bb FALSE  first
#&gt; 3 5 cc  TRUE vector</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># dimensions</span>
<span class="kw">dim</span>(df)</code></pre></div>
<pre><code>#&gt; [1] 3 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nrow</span>(df)</code></pre></div>
<pre><code>#&gt; [1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ncol</span>(df)</code></pre></div>
<pre><code>#&gt; [1] 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(df)</code></pre></div>
<pre><code>#&gt; [1] 4</code></pre>
<p>We’ll discuss data frames in great detail in the next chapter.</p>
</div>
</div>
<div id="comparision" class="section level2">
<h2><span class="header-section-number">3.3</span> Comparision</h2>
<p>Logical Operators include:</p>
<table>
<thead>
<tr class="header">
<th>Operator</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>&gt;</td>
<td>greater than</td>
</tr>
<tr class="even">
<td>&gt;=</td>
<td>greater than or equal to</td>
</tr>
<tr class="odd">
<td>&lt;</td>
<td>less than</td>
</tr>
<tr class="even">
<td>&lt;=</td>
<td>less than or equal to</td>
</tr>
<tr class="odd">
<td>==</td>
<td>exactly equal to</td>
</tr>
<tr class="even">
<td>!=</td>
<td>not equal to</td>
</tr>
</tbody>
</table>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">v &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">12</span>
v[v <span class="op">&gt;</span><span class="st"> </span><span class="dv">9</span>]</code></pre></div>
<pre><code>#&gt; [1] 10 11 12</code></pre>
<p>Equality can be tricky to test for since real numbers can’t be expressed exactly in computers.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">sqrt</span>(<span class="dv">2</span>)
(y &lt;-<span class="st"> </span>x<span class="op">^</span><span class="dv">2</span>)</code></pre></div>
<pre><code>#&gt; [1] 2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y <span class="op">==</span><span class="st"> </span><span class="dv">2</span></code></pre></div>
<pre><code>#&gt; [1] FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(y, <span class="dt">digits =</span> <span class="dv">20</span>)</code></pre></div>
<pre><code>#&gt; [1] 2.0000000000000004</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">all.equal</span>(y, <span class="dv">2</span>)          ## equality with some tolerance</code></pre></div>
<pre><code>#&gt; [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">all.equal</span>(y, <span class="dv">3</span>)</code></pre></div>
<pre><code>#&gt; [1] &quot;Mean relative difference: 0.5&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">isTRUE</span>(<span class="kw">all.equal</span>(y, <span class="dv">3</span>))  ## if you want a boolean, use isTRUE()</code></pre></div>
<pre><code>#&gt; [1] FALSE</code></pre>
</div>
<div id="logical-and-sets" class="section level2">
<h2><span class="header-section-number">3.4</span> Logical and sets</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>)
df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="kw">expand.grid</span>(x, x))
<span class="kw">names</span>(df) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>)
df<span class="op">$</span>and  &lt;-<span class="st"> </span>df<span class="op">$</span>x <span class="op">&amp;</span><span class="st"> </span>df<span class="op">$</span>y     <span class="co"># logical and</span>
df<span class="op">$</span>or   &lt;-<span class="st"> </span>df<span class="op">$</span>x <span class="op">|</span><span class="st"> </span>df<span class="op">$</span>y     <span class="co"># logical or</span>
df<span class="op">$</span>notx &lt;-<span class="st"> </span><span class="op">!</span>df<span class="op">$</span>x           <span class="co"># negation</span>
df<span class="op">$</span>xor  &lt;-<span class="st"> </span><span class="kw">xor</span>(df<span class="op">$</span>x, df<span class="op">$</span>y) <span class="co"># exlusive or</span>
df</code></pre></div>
<pre><code>#&gt;       x     y   and    or  notx   xor
#&gt; 1  TRUE  TRUE  TRUE  TRUE FALSE FALSE
#&gt; 2 FALSE  TRUE FALSE  TRUE  TRUE  TRUE
#&gt; 3  TRUE FALSE FALSE  TRUE FALSE  TRUE
#&gt; 4 FALSE FALSE FALSE FALSE  TRUE FALSE</code></pre>
<p>R has two versions of the logical operators <code>&amp;</code> and <code>&amp;&amp;</code> (<code>|</code> and <code>||</code>). The single version is the vectorized version while the the double version returns a length-one vector. Use the double version in logical control structures (if, for, while, etc).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># TRUE/FALSE and each element</span>
<span class="ot">TRUE</span> <span class="op">&amp;</span><span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>#&gt; [1]  TRUE FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="ot">FALSE</span> <span class="op">&amp;</span><span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>#&gt; [1] FALSE FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># TRUE/FALSE and first element</span>
<span class="ot">TRUE</span> <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>#&gt; [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="ot">FALSE</span> <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>#&gt; [1] FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># TRUE/FALSE or each element</span>
<span class="ot">TRUE</span> <span class="op">|</span><span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>#&gt; [1] TRUE TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="ot">FALSE</span> <span class="op">|</span><span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>#&gt; [1]  TRUE FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># TRUE/FALSE or first element</span>
<span class="ot">TRUE</span> <span class="op">||</span><span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>#&gt; [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="ot">FALSE</span> <span class="op">||</span><span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>#&gt; [1] TRUE</code></pre>
<p>This is a common source of bugs in control structures (if, for, while, etc) where you must have a single TRUE / FALSE.</p>
<p>Also, note that <code>=</code> is used for assignment and not comparison <code>==</code>.</p>
<p>It also has useful helpers <code>any</code> and <code>all</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>)
<span class="kw">any</span>(x)</code></pre></div>
<pre><code>#&gt; [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">all</span>(x)</code></pre></div>
<pre><code>#&gt; [1] FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">all</span>(<span class="op">!</span>x[<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>])</code></pre></div>
<pre><code>#&gt; [1] TRUE</code></pre>
<p>And also some useful set operations intersect, union, setdiff, setequal</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span>
y &lt;-<span class="st"> </span><span class="dv">3</span><span class="op">:</span><span class="dv">7</span>

<span class="kw">intersect</span>(x, y) <span class="co"># in x and in y</span></code></pre></div>
<pre><code>#&gt; [1] 3 4 5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">union</span>(x, y)     <span class="co"># different than c()</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 3 4 5 6 7</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(x,y)          <span class="co"># not a set operation</span></code></pre></div>
<pre><code>#&gt;  [1] 1 2 3 4 5 3 4 5 6 7</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">setdiff</span>(x, y)   <span class="co"># in x but not in y</span></code></pre></div>
<pre><code>#&gt; [1] 1 2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">setdiff</span>(y, x)   <span class="co"># in y but not in x</span></code></pre></div>
<pre><code>#&gt; [1] 6 7</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">setequal</span>(x, y)</code></pre></div>
<pre><code>#&gt; [1] FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">z &lt;-<span class="st"> </span><span class="dv">5</span><span class="op">:</span><span class="dv">1</span>
<span class="kw">setequal</span>(x, z)</code></pre></div>
<pre><code>#&gt; [1] TRUE</code></pre>
</div>
<div id="vectorization-recycling" class="section level2">
<h2><span class="header-section-number">3.5</span> Vectorization &amp; Recycling</h2>
<p>Many operations in R are <em>vectorized</em>, meaning that operations occur in parallel in certain R objects. This allows you to write code that is efficient, concise, and easier to read than in non-vectorized languages.</p>
<p>The simplest example is when adding two vectors together.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">3</span>
y &lt;-<span class="st"> </span><span class="dv">11</span><span class="op">:</span><span class="dv">13</span>
z &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span>y
z</code></pre></div>
<pre><code>#&gt; [1] 12 14 16</code></pre>
<p>In most other languages you would have to do something like</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">z &lt;-<span class="st"> </span><span class="kw">numeric</span>(<span class="kw">length</span>(x))

<span class="cf">for</span>(i <span class="cf">in</span> <span class="kw">seq_along</span>(x)) {
      z[i] &lt;-<span class="st"> </span>x[i] <span class="op">+</span><span class="st"> </span>y[i]
}
z</code></pre></div>
<pre><code>#&gt; [1] 12 14 16</code></pre>
<p>We saw a a form of vectorization above in the logical operators.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x</code></pre></div>
<pre><code>#&gt; [1] 1 2 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span></code></pre></div>
<pre><code>#&gt; [1] FALSE FALSE  TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x[x <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span>]</code></pre></div>
<pre><code>#&gt; [1] 3</code></pre>
<p>Matrix operations are also vectorized, making for nice compact notation. This way, we can do element-by-element operations on matrices without having to loop over every element.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">2</span>)
y &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rep</span>(<span class="dv">10</span>, <span class="dv">4</span>), <span class="dv">2</span>, <span class="dv">2</span>)
x</code></pre></div>
<pre><code>#&gt;      [,1] [,2]
#&gt; [1,]    1    3
#&gt; [2,]    2    4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y</code></pre></div>
<pre><code>#&gt;      [,1] [,2]
#&gt; [1,]   10   10
#&gt; [2,]   10   10</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x <span class="op">*</span><span class="st"> </span>y  <span class="co"># element-wise multiplication</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2]
#&gt; [1,]   10   30
#&gt; [2,]   20   40</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x <span class="op">/</span><span class="st"> </span>y  <span class="co"># element-wise division</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2]
#&gt; [1,]  0.1  0.3
#&gt; [2,]  0.2  0.4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x <span class="op">%*%</span><span class="st"> </span>y  <span class="co"># true matrix multiplication</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2]
#&gt; [1,]   40   40
#&gt; [2,]   60   60</code></pre>
<p>R also recyles arguments.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span>
z &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span>.<span class="dv">1</span>  <span class="co"># add .1 to each element</span>
z</code></pre></div>
<pre><code>#&gt;  [1]  1.1  2.1  3.1  4.1  5.1  6.1  7.1  8.1  9.1 10.1</code></pre>
<p>While you usually either want the same length vector or a length one vector. You are not limited to just these options.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span>
y &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span><span class="kw">c</span>(.<span class="dv">1</span>, .<span class="dv">2</span>) 
y</code></pre></div>
<pre><code>#&gt;  [1]  1.1  2.2  3.1  4.2  5.1  6.2  7.1  8.2  9.1 10.2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">z &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span><span class="kw">c</span>(.<span class="dv">1</span>, .<span class="dv">2</span>, .<span class="dv">3</span>)</code></pre></div>
<pre><code>#&gt; Warning in x + c(0.1, 0.2, 0.3): longer object length is not a multiple of shorter object length</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">z</code></pre></div>
<pre><code>#&gt;  [1]  1.1  2.2  3.3  4.1  5.2  6.3  7.1  8.2  9.3 10.1</code></pre>
</div>
<div id="control-structures" class="section level2">
<h2><span class="header-section-number">3.6</span> Control Structures</h2>
<p>Control structures allow you to put some “logic” into your R code, rather than just always executing the same R code every time. Control structures allow you to respond to inputs or to features of the data and execute different R expressions accordingly.</p>
<p>Commonly used control structures are</p>
<ul>
<li><p><code>if</code> and <code>else</code>: testing a condition and acting on it</p></li>
<li><p><code>for</code>: execute a loop a fixed number of times</p></li>
<li><p><code>while</code>: execute a loop <em>while</em> a condition is true</p></li>
<li><p><code>repeat</code>: execute an infinite loop (must <code>break</code> out of it to stop)</p></li>
<li><p><code>break</code>: break the execution of a loop</p></li>
<li><p><code>next</code>: skip an interation of a loop</p></li>
</ul>
<div id="if-else" class="section level3">
<h3><span class="header-section-number">3.6.1</span> <code>if</code>-<code>else</code></h3>
<p>The <code>if</code>-<code>else</code> combination is probably the most commonly used control structure in R (or perhaps any language). This structure allows you to test a condition and act on it depending on whether it’s true or false.</p>
<p>For starters, you can just use the <code>if</code> statement.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span>(<span class="op">&lt;</span>condition<span class="op">&gt;</span>) {
        <span class="co"># do something</span>
} 
<span class="co"># Continue with rest of code</span></code></pre></div>
<p>The above code does nothing if the condition is false. If you have an action you want to execute when the condition is false, then you need an <code>else</code> clause.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span>(<span class="op">&lt;</span>condition<span class="op">&gt;</span>) {
        <span class="co"># do something</span>
} 
<span class="cf">else</span> {
        <span class="co"># do something else</span>
}</code></pre></div>
<p>You can have a series of tests by following the initial <code>if</code> with any number of <code>else if</code>s.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span>(<span class="op">&lt;</span>condition1<span class="op">&gt;</span>) {
        <span class="co"># do something</span>
} <span class="cf">else</span> <span class="cf">if</span>(<span class="op">&lt;</span>condition2<span class="op">&gt;</span>)  {
        <span class="co"># do something different</span>
} <span class="cf">else</span> {
        <span class="co"># do something else different</span>
}</code></pre></div>
</div>
<div id="for-loops" class="section level3">
<h3><span class="header-section-number">3.6.2</span> <code>for</code> Loops</h3>
<p>For loops are pretty much the only looping construct that you will need in R. While you may occasionally find a need for other types of loops, in my experience doing data analysis, I’ve found very few situations where a for loop wasn’t sufficient.</p>
<p>In R, for loops take an interator variable and assign it successive values from a sequence or vector. For loops are most commonly used for iterating over the elements of an object (list, vector, etc.)</p>
<p>The following three loops all have the similar behavior.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>)

<span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(x)) {
        ## Print out each element of &#39;x&#39;
        <span class="kw">print</span>(x[i])  
}</code></pre></div>
<pre><code>#&gt; [1] &quot;a&quot;
#&gt; [1] &quot;b&quot;
#&gt; [1] &quot;c&quot;
#&gt; [1] &quot;d&quot;</code></pre>
<p>The <code>seq_along()</code> function is commonly used in conjunction with for loops in order to generate an integer sequence based on the length of an object (in this case, the object <code>x</code>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Generate a sequence based on length of &#39;x&#39;
<span class="cf">for</span>(i <span class="cf">in</span> <span class="kw">seq_along</span>(x)) {   
        <span class="kw">print</span>(x[i])
}</code></pre></div>
<pre><code>#&gt; [1] &quot;a&quot;
#&gt; [1] &quot;b&quot;
#&gt; [1] &quot;c&quot;
#&gt; [1] &quot;d&quot;</code></pre>
<p>It is not necessary to use an index-type variable.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">for</span>(letter <span class="cf">in</span> x) {
        <span class="kw">print</span>(letter)
}</code></pre></div>
<pre><code>#&gt; [1] &quot;a&quot;
#&gt; [1] &quot;b&quot;
#&gt; [1] &quot;c&quot;
#&gt; [1] &quot;d&quot;</code></pre>
<p>Try these examples above but with <code>x &lt;- NULL</code> and notice the difference in behavior.</p>
<p>Nested loops are commonly needed for multidimensional or hierarchical data structures (e.g. matrices, lists). Be careful with nesting though. Nesting beyond 2 to 3 levels often makes it difficult to read/understand the code. If you find yourself in need of a large number of nested loops, you may want to break up the loops by using functions (discussed later).</p>
</div>
<div id="while-loops" class="section level3">
<h3><span class="header-section-number">3.6.3</span> <code>while</code> Loops</h3>
<p>While loops begin by testing a condition. If it is true, then they execute the loop body. Once the loop body is executed, the condition is tested again, and so forth, until the condition is false, after which the loop exits.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">count &lt;-<span class="st"> </span><span class="dv">0</span>
<span class="cf">while</span>(count <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>) {
        <span class="kw">print</span>(count)
        count &lt;-<span class="st"> </span>count <span class="op">+</span><span class="st"> </span><span class="dv">1</span>
}</code></pre></div>
<pre><code>#&gt; [1] 0
#&gt; [1] 1
#&gt; [1] 2
#&gt; [1] 3
#&gt; [1] 4
#&gt; [1] 5
#&gt; [1] 6
#&gt; [1] 7
#&gt; [1] 8
#&gt; [1] 9</code></pre>
<p>While loops can potentially result in infinite loops if not written properly. Use with care!</p>
<p>Sometimes there will be more than one condition in the test.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">z &lt;-<span class="st"> </span><span class="dv">5</span>
<span class="kw">set.seed</span>(<span class="dv">1</span>)

<span class="cf">while</span>(z <span class="op">&gt;=</span><span class="st"> </span><span class="dv">3</span> <span class="op">&amp;&amp;</span><span class="st"> </span>z <span class="op">&lt;=</span><span class="st"> </span><span class="dv">10</span>) {
        coin &lt;-<span class="st"> </span><span class="kw">rbinom</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="fl">0.5</span>)
        
        <span class="cf">if</span>(coin <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) {  ## random walk
                z &lt;-<span class="st"> </span>z <span class="op">+</span><span class="st"> </span><span class="dv">1</span>
        } <span class="cf">else</span> {
                z &lt;-<span class="st"> </span>z <span class="op">-</span><span class="st"> </span><span class="dv">1</span>
        } 
}
<span class="kw">print</span>(z)</code></pre></div>
<pre><code>#&gt; [1] 2</code></pre>
<p>Conditions are always evaluated from left to right. For example, in the above code, if <code>z</code> were less than 3, the second test would not have been evaluated.</p>
</div>
<div id="repeat-loops" class="section level3">
<h3><span class="header-section-number">3.6.4</span> <code>repeat</code> Loops</h3>
<p><code>repeat</code> initiates an infinite loop right from the start. These are not commonly used in statistical or data analysis applications but they do have their uses. The only way to exit a <code>repeat</code> loop is to call <code>break</code>.</p>
<p>One possible paradigm might be in an iterative algorith where you may be searching for a solution and you don’t want to stop until you’re close enough to the solution. In this kind of situation, you often don’t know in advance how many iterations it’s going to take to get “close enough” to the solution.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x0 &lt;-<span class="st"> </span><span class="dv">1</span>
tol &lt;-<span class="st"> </span><span class="fl">1e-8</span>

<span class="cf">repeat</span> {
        x1 &lt;-<span class="st"> </span><span class="kw">computeEstimate</span>()
        
        <span class="cf">if</span>(<span class="kw">abs</span>(x1 <span class="op">-</span><span class="st"> </span>x0) <span class="op">&lt;</span><span class="st"> </span>tol) {  ## Close enough?
                <span class="cf">break</span>
        } <span class="cf">else</span> {
                x0 &lt;-<span class="st"> </span>x1
        } 
}</code></pre></div>
<p>Note that the above code will not run if the <code>computeEstimate()</code> function is not defined (I just made it up for the purposes of this demonstration).</p>
<p>The loop above is a bit dangerous because there’s no guarantee it will ever stop. You could get in a situation where the values of <code>x0</code> and <code>x1</code> oscillate back and forth and never converge. Better to set a hard limit on the number of iterations by using a <code>for</code> loop and then report whether convergence was achieved or not.</p>
</div>
<div id="next-break" class="section level3">
<h3><span class="header-section-number">3.6.5</span> <code>next</code>, <code>break</code></h3>
<p>While not used very often it’s nice to know about these.</p>
<p><code>next</code> is used to skip an iteration of a loop.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">100</span>) {
        <span class="cf">if</span>(i <span class="op">&lt;=</span><span class="st"> </span><span class="dv">20</span>) {
                ## Skip the first 20 iterations
                <span class="cf">next</span>                 
        }
        ## Do something here
}</code></pre></div>
<p><code>break</code> is used to exit a loop immediately, regardless of what iteration the loop may be on.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">100</span>) {
      <span class="kw">print</span>(i)

      <span class="cf">if</span>(i <span class="op">&gt;</span><span class="st"> </span><span class="dv">20</span>) {
              ## Stop loop after 20 iterations
              <span class="cf">break</span>  
      }     
}</code></pre></div>
</div>
<div id="looping" class="section level3">
<h3><span class="header-section-number">3.6.6</span> Looping</h3>
<p>For loops are so common that that R has some functions which implement looping in a compact form to make your life easier.</p>
<ul>
<li><code>apply</code> is generic: applies a function to a matrix’s rows or columns (or, more generally, to dimensions of an array)</li>
<li><code>lapply</code> is a list apply which acts on a list or vector and returns a list.</li>
<li><code>sapply</code> is a simple lapply but defaults to returning a vector (or matrix) if possible.</li>
<li><code>vapply</code> is a verified apply. This is a sapply with the return object type prespecified.</li>
<li><code>rapply</code> is a recursive apply for nested lists, i.e. lists within lists</li>
<li><code>tapply</code> is a tagged apply where the tags identify the subsets to apply a function</li>
<li><code>mapply</code> is a multivariabe apply for functions that have multiple arguments.</li>
<li><code>Map</code> is a wrapper to mapply with SIMPLIFY = FALSE, so it is guaranteed to return a list.</li>
<li><code>replicate</code> is a wrapper around sapply for repeated evaluation of an expression</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Two dimensional matrix</span>
M &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">seq</span>(<span class="dv">1</span>,<span class="dv">16</span>), <span class="dv">4</span>, <span class="dv">4</span>)
M</code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]    1    5    9   13
#&gt; [2,]    2    6   10   14
#&gt; [3,]    3    7   11   15
#&gt; [4,]    4    8   12   16</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># apply min to rows</span>
<span class="kw">apply</span>(M, <span class="dv">1</span>, min)</code></pre></div>
<pre><code>#&gt; [1] 1 2 3 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># apply max to columns</span>
<span class="kw">apply</span>(M, <span class="dv">2</span>, max)</code></pre></div>
<pre><code>#&gt; [1]  4  8 12 16</code></pre>
<p>If you want row/column means or sums for a 2D matrix, be sure to investigate the highly optimized, lightning-quick <code>colMeans</code>, <code>rowMeans</code>, <code>colSums</code>, <code>rowSums</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">a =</span> <span class="dv">1</span>, <span class="dt">b =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">c =</span> <span class="dv">10</span><span class="op">:</span><span class="dv">25</span>)
x</code></pre></div>
<pre><code>#&gt; $a
#&gt; [1] 1
#&gt; 
#&gt; $b
#&gt; [1] 1 2 3
#&gt; 
#&gt; $c
#&gt;  [1] 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lapply</span>(x, <span class="dt">FUN =</span> length) </code></pre></div>
<pre><code>#&gt; $a
#&gt; [1] 1
#&gt; 
#&gt; $b
#&gt; [1] 3
#&gt; 
#&gt; $c
#&gt; [1] 16</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sapply</span>(x, <span class="dt">FUN =</span> length) </code></pre></div>
<pre><code>#&gt;  a  b  c 
#&gt;  1  3 16</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">vapply</span>(x, <span class="dt">FUN =</span> length, <span class="dt">FUN.VALUE =</span> 0L) </code></pre></div>
<pre><code>#&gt;  a  b  c 
#&gt;  1  3 16</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">20</span>
y &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">rep</span>(letters[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>], <span class="dt">each =</span> <span class="dv">4</span>)) <span class="co"># a vector of the same length as x</span>
<span class="kw">tapply</span>(x, y, sum) </code></pre></div>
<pre><code>#&gt;  a  b  c  d  e 
#&gt; 10 26 42 58 74</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Sums the 1st elements, the 2nd elements, etc. </span>
<span class="kw">mapply</span>(sum, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>) </code></pre></div>
<pre><code>#&gt; [1]  3  6  9 12 15</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># find the mean of 10 random normal variables, 5 times</span>
<span class="kw">replicate</span>(<span class="dv">5</span>, <span class="kw">mean</span>(<span class="kw">rnorm</span>(<span class="dv">10</span>)))</code></pre></div>
<pre><code>#&gt; [1]  0.009560203 -0.082577193  0.032326586  0.192819739 -0.432339116</code></pre>
<p><code>tapply</code> is in a simalar spirit to a common data analysis paradigm called split-apply-combine where we split our data set based on a group, apply a function or code to it, and combine the results back together. We will revisit this paradigm in greater detail when we get to <em>R for Data Science</em>.</p>
</div>
</div>
<div id="function-basics" class="section level2">
<h2><span class="header-section-number">3.7</span> Function Basics</h2>
</div>
<div id="environments-scoping" class="section level2">
<h2><span class="header-section-number">3.8</span> Environments &amp; Scoping</h2>
</div>
<div id="assignment-1" class="section level2">
<h2><span class="header-section-number">3.9</span> Assignment</h2>
<ol style="list-style-type: decimal">
<li>Browse this <a href="http://adv-r.had.co.nz/Vocabulary.html">vocabulary list</a> and read the help file for functions that interest you.</li>
<li>ddd</li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="good-practices.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="base-r-data-structures.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/DavisBrian/corporater/edit/master/rbasics.Rmd",
"text": "Edit"
},
"download": ["corporater.pdf", "corporater.epub"],
"toc": {
"collapse": "subsection"
},
"css": "corp.css"
});
});
</script>

</body>

</html>
